@using SFA.DAS.CommitmentsV2.Shared.Extensions
@using SFA.DAS.CommitmentsV2.Types
@model SFA.DAS.ProviderCommitments.Web.Models.Apprentice.DetailsViewModel

@{
    ViewData["Title"] = "Apprentice Details";
}

<h1 class="govuk-heading-xl">@Model.ApprenticeName</h1>

<div class="govuk-grid-row govuk-!-margin-bottom-2">
    <div class="govuk-grid-column-two-thirds">

        @if (Model.Status == ApprenticeshipStatus.Stopped ||
            Model.Status == ApprenticeshipStatus.Live ||
            Model.Status == ApprenticeshipStatus.Paused ||
            Model.Status == ApprenticeshipStatus.WaitingToStart)
        {
            <details id="" class="govuk-details" data-module="govuk-details">
                <summary class="govuk-details__summary">
                    <span class="govuk-details__summary-text">
                        Help with changes in apprentice's circumstances
                    </span>
                </summary>
                <div class="govuk-details__text">
                    <ul class="govuk-list govuk-list--bullet">
                        <p class="govuk-body">If an apprentice you're training needs to move to a new employer, you should:</p>

                        <li>contact their original employer and ask them to stop the apprentice record</li>
                        <li>speak to the new employer to agree new training dates, price and request permission to move the apprentice to their apprenticeship service account</li>

                        <br />

                        <p class="govuk-body">Once you've agreed these details, you can change the employer.</p>

                        <p class="govuk-body">Non-levy employers will not need apprenticeship funding reserved when taking on an apprentice from another employer.</p>
                    </ul>
                </div>
            </details>
        }

        <h2 class="govuk-heading-m">Apprentice status</h2>

        <div class="govuk-grid-column-one-third das-!-text-align-right--from-tablet">
            @*<a href="#" class="govuk-link">Edit apprentice</a>*@
        </div>

        <table class="govuk-table">
            <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header das-table-cell-width-40">Status</th>
                    <td class="govuk-table__cell das-table-cell-width-60">@Model.Status.GetDescription()</td>
                </tr>

                @if (Model.Status == ApprenticeshipStatus.Stopped)
                {
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header ">Stop applies from</th>
                        <td class="govuk-table__cell">@Model.StopDate.Value.ToGdsFormatWithoutDay()</td>
                    </tr>
                }
            </tbody>
        </table>

        <div class="govuk-grid-row govuk-!-margin-bottom-2">
            <div class="govuk-grid-column-two-thirds">
                <h2 class="govuk-heading-m">Overview</h2>
            </div>
            <div class="govuk-grid-column-one-third das-!-text-align-right--from-tablet">
                @*<a href="#" class="govuk-link">Edit apprentice</a>*@
            </div>
        </div>

        <table class="govuk-table">
            <tbody class="govuk-table__body">

                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header das-table-cell-width-40">Employer</th>
                    <td class="govuk-table__cell das-table-cell-width-40">@Model.Employer</td>
                    <td class="govuk-table__cell das-table-cell-width-20 govuk-table__cell--numeric">
                        @if (Model.Status == ApprenticeshipStatus.Stopped && Model.ChangeOfEmployerEnabled)
                        {
                            <a id="change-employer-link" class="govuk-link" href="@Url.Action("Inform", new {Model.ProviderId, Model.ApprenticeshipHashedId})">Change</a>
                        }
                    </td>
                </tr>

                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">Reference</th>
                    <td class="govuk-table__cell">@Model.Reference</td>
                    <td class="govuk-table__cell"></td>
                </tr>

                <tr class="govuk-table__row">

                    <th scope="row" class="govuk-table__header">Agreement ID</th>
                    <td class="govuk-table__cell">@Model.AgreementId</td>
                    <td class="govuk-table__cell"></td>
                </tr>
            </tbody>
        </table>

        <div class="govuk-grid-row govuk-!-margin-bottom-2">
            <div class="govuk-grid-column-two-thirds">
                <h2 class="govuk-heading-m">Apprentice</h2>
            </div>
            <div class="govuk-grid-column-one-third das-!-text-align-right--from-tablet">
                @*<a href="#" class="govuk-link">Edit apprentice</a>*@
            </div>
        </div>

        <table class="govuk-table">
            <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header das-table-cell-width-40">Name</th>
                    <td class="govuk-table__cell das-table-cell-width-60">@Model.ApprenticeName</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">Date of birth</th>
                    <td class="govuk-table__cell">@Model.DateOfBirth.ToGdsFormat()</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">Unique learner number</th>
                    <td class="govuk-table__cell">@Model.Uln</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">Apprenticeship training course</th>
                    <td class="govuk-table__cell">@Model.CourseName</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">Training start date</th>
                    <td class="govuk-table__cell">@Model.StartDate.ToGdsFormatWithoutDay()</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">Training end date</th>
                    <td class="govuk-table__cell">@Model.EndDate.ToGdsFormatWithoutDay()</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">Total agreed apprenticeship price</th>
                    <td class="govuk-table__cell">@Model.Cost.ToGdsCostFormat()</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">Your reference</th>
                    <td class="govuk-table__cell">@Model.ProviderRef</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>